@import "tailwindcss";
@import "./tokens.css";

/* custom layers/utilities can go below */
@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
}

:root{
  /* calendar design tokens */
  --surface:#050505;
  --surface-elevated:#111111;
  --text-primary:#F5F5F5;
  --text-muted:#A3A3A3;
  --accent-red:#FF453A;
  --hairline:rgba(255,255,255,0.08);
  --dot:rgba(200,200,205,0.85);
  /* Weekend day numbers use a lighter gray for better readability */
  --weekend-dim:rgba(255,255,255,0.4);

  /* existing aliases */
  --bg:var(--surface);
  --surface-2:var(--surface-elevated);
  --text:var(--text-primary);
  --muted:var(--text-muted);
  --accent:#8E8E8E;
  --radius:16px; --radius-sm:12px;
  --popover:var(--surface); --popover-foreground:var(--text);
  --bg-gradient:radial-gradient(120% 120% at 50% 0%, #1c1d22 0%, #0c0d11 48%, #020203 100%);
}
html,
body { min-height:100%; }
html,body{
  background-color:var(--bg);
  background-image:var(--bg-gradient);
  background-attachment:fixed;
  background-repeat:no-repeat;
  background-size:cover;
  color:var(--text);
  font-weight:600;
  touch-action:pan-y;
  overflow-x:hidden;
}
.section{ padding:20px 16px 8px; }
.h-label{ letter-spacing:.12em; text-transform:uppercase; font-weight:700; color:var(--muted); font-size:12px; }
.card{ background:linear-gradient(180deg,var(--surface),var(--surface-2));
       border-radius:var(--radius);
       box-shadow:0 1px 0 rgba(255,255,255,.04) inset, 0 10px 28px rgba(0,0,0,.5);
       border:1px solid rgba(255,255,255,.06); }
.inner-hair{ box-shadow:0 1px 0 rgba(255,255,255,.04) inset; }
.safe-bottom{ padding-bottom:calc(env(safe-area-inset-bottom,16px) + 12px); }
.scroll-snap{ scroll-snap-type:x mandatory; -webkit-overflow-scrolling:touch; touch-action:pan-x; }
.snap-start{ scroll-snap-align:start; }

.now-line{
  height:2px;
  background-color:var(--timeline-now);
  box-shadow:0 0 6px var(--timeline-now);
}
.now-line::after{
  content:"";
  position:absolute;
  left:0;right:0;top:-10px;bottom:-10px;
  background:linear-gradient(to bottom,transparent,var(--timeline-now),transparent);
  opacity:.4;
  pointer-events:none;
}
@media (prefers-reduced-motion: no-preference){
  .now-line{
    background-image:linear-gradient(90deg,transparent,var(--timeline-now),transparent);
    background-size:200% 100%;
    animation:now-shimmer 2s linear infinite;
  }
}
@keyframes now-shimmer{
  from{background-position:200% 0;}
  to{background-position:-200% 0;}
}

body.modal-open [data-bottom-nav] { display: none !important; }

.project-crack-overlay {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 3;
  overflow: hidden;
}

.project-crack {
  position: absolute;
  background: linear-gradient(
    to right,
    rgba(255, 255, 255, 0.08),
    rgba(255, 255, 255, 0.95),
    rgba(255, 255, 255, 0.08)
  );
  border-radius: 999px;
  opacity: 0;
  filter: drop-shadow(0 0 4px rgba(255, 255, 255, 0.55));
  mix-blend-mode: screen;
}

.project-crack--main {
  top: 32%;
  left: 8%;
  width: 74%;
  height: 1px;
  --project-crack-rotation: -6deg;
  transform-origin: left center;
  transform: rotate(var(--project-crack-rotation)) scaleX(0);
  animation: project-crack-horizontal 1.05s ease-out forwards;
}

.project-crack--branch {
  top: 56%;
  left: 22%;
  width: 48%;
  height: 1px;
  --project-crack-rotation: 9deg;
  transform-origin: left center;
  transform: rotate(var(--project-crack-rotation)) scaleX(0);
  animation: project-crack-horizontal 1s ease-out forwards;
  animation-delay: 90ms;
}

.project-crack--upper {
  top: 20%;
  left: 54%;
  width: 32%;
  height: 1px;
  --project-crack-rotation: -18deg;
  transform-origin: left center;
  transform: rotate(var(--project-crack-rotation)) scaleX(0);
  animation: project-crack-horizontal 0.9s ease-out forwards;
  animation-delay: 170ms;
}

.project-crack--vertical,
.project-crack--vertical-secondary {
  width: 1.5px;
  background: linear-gradient(
    to bottom,
    rgba(255, 255, 255, 0.08),
    rgba(255, 255, 255, 0.95),
    rgba(255, 255, 255, 0.08)
  );
  transform-origin: center top;
  transform: rotate(var(--project-crack-rotation, 0deg)) scaleY(0);
  animation: project-crack-vertical 1.05s ease-out forwards;
}

.project-crack--vertical {
  top: 14%;
  left: 44%;
  height: 58%;
  --project-crack-rotation: 3deg;
  animation-delay: 60ms;
}

.project-crack--vertical-secondary {
  top: 36%;
  left: 66%;
  height: 36%;
  --project-crack-rotation: -4deg;
  animation-delay: 200ms;
}

@keyframes project-crack-horizontal {
  0% {
    opacity: 0;
    transform: rotate(var(--project-crack-rotation)) scaleX(0);
  }
  22% {
    opacity: 1;
    transform: rotate(var(--project-crack-rotation)) scaleX(0.6);
  }
  55% {
    opacity: 1;
    transform: rotate(var(--project-crack-rotation)) scaleX(1);
  }
  100% {
    opacity: 0;
    transform: rotate(var(--project-crack-rotation)) scaleX(1.12);
  }
}

@keyframes project-crack-vertical {
  0% {
    opacity: 0;
    transform: rotate(var(--project-crack-rotation, 0deg)) scaleY(0);
  }
  28% {
    opacity: 1;
    transform: rotate(var(--project-crack-rotation, 0deg)) scaleY(0.65);
  }
  58% {
    opacity: 1;
    transform: rotate(var(--project-crack-rotation, 0deg)) scaleY(1);
  }
  100% {
    opacity: 0;
    transform: rotate(var(--project-crack-rotation, 0deg)) scaleY(1.12);
  }
}

@media (prefers-reduced-motion: reduce) {
  .project-crack {
    animation: none !important;
    opacity: 0 !important;
  }
}
