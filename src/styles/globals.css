@import "tailwindcss";
@import "./tokens.css";

/* custom layers/utilities can go below */
@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
}

:root{
  /* calendar design tokens */
  --surface:#050505;
  --surface-elevated:#111111;
  --text-primary:#F5F5F5;
  --text-muted:#A3A3A3;
  --accent-red:#FF453A;
  --hairline:rgba(255,255,255,0.08);
  --dot:rgba(200,200,205,0.85);
  /* Weekend day numbers use a lighter gray for better readability */
  --weekend-dim:rgba(255,255,255,0.4);

  /* existing aliases */
  --bg:var(--surface);
  --surface-2:var(--surface-elevated);
  --text:var(--text-primary);
  --muted:var(--text-muted);
  --accent:#8E8E8E;
  --radius:16px; --radius-sm:12px;
  --popover:var(--surface); --popover-foreground:var(--text);
  --bg-gradient:radial-gradient(120% 120% at 50% 0%, #1c1d22 0%, #0c0d11 48%, #020203 100%);
}
html,
body { min-height:100%; }
html,body{
  background-color:var(--bg);
  background-image:var(--bg-gradient);
  background-attachment:fixed;
  background-repeat:no-repeat;
  background-size:cover;
  color:var(--text);
  font-weight:600;
  touch-action:pan-y;
  overflow-x:hidden;
}
.section{ padding:20px 16px 8px; }
.h-label{ letter-spacing:.12em; text-transform:uppercase; font-weight:700; color:var(--muted); font-size:12px; }
.card{ background:linear-gradient(180deg,var(--surface),var(--surface-2));
       border-radius:var(--radius);
       box-shadow:0 1px 0 rgba(255,255,255,.04) inset, 0 10px 28px rgba(0,0,0,.5);
       border:1px solid rgba(255,255,255,.06); }
.inner-hair{ box-shadow:0 1px 0 rgba(255,255,255,.04) inset; }
.safe-bottom{ padding-bottom:calc(env(safe-area-inset-bottom,16px) + 12px); }
.scroll-snap{ scroll-snap-type:x mandatory; -webkit-overflow-scrolling:touch; touch-action:pan-x; }
.snap-start{ scroll-snap-align:start; }

.now-line{
  height:2px;
  background-color:var(--timeline-now);
  box-shadow:0 0 6px var(--timeline-now);
}
.now-line::after{
  content:"";
  position:absolute;
  left:0;right:0;top:-10px;bottom:-10px;
  background:linear-gradient(to bottom,transparent,var(--timeline-now),transparent);
  opacity:.4;
  pointer-events:none;
}
@media (prefers-reduced-motion: no-preference){
  .now-line{
    background-image:linear-gradient(90deg,transparent,var(--timeline-now),transparent);
    background-size:200% 100%;
    animation:now-shimmer 2s linear infinite;
  }
}
@keyframes now-shimmer{
  from{background-position:200% 0;}
  to{background-position:-200% 0;}
}

body.modal-open [data-bottom-nav] { display: none !important; }

.project-crack-overlay {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 3;
  overflow: hidden;
}

.project-crack {
  position: absolute;
  display: block;
  width: max-content;
  height: var(--project-crack-thickness, 2.6px);
  background: linear-gradient(
    to right,
    rgba(255, 255, 255, 0.12),
    rgba(255, 255, 255, 0.98),
    rgba(255, 255, 255, 0.32)
  );
  border-radius: 999px;
  opacity: 0;
  box-shadow: 0 0 12px rgba(255, 255, 255, 0.45);
  mix-blend-mode: screen;
  --project-crack-rotation: 0deg;
  transform-origin: left center;
  transform: rotate(var(--project-crack-rotation)) scaleX(0);
  animation: var(--project-crack-animation, none);
}

.project-crack::before,
.project-crack::after {
  content: '';
  position: absolute;
  height: var(--project-crack-branch-thickness, 1.8px);
  background: inherit;
  border-radius: 999px;
  opacity: 0;
  box-shadow: inherit;
  mix-blend-mode: inherit;
  --project-crack-rotation: 0deg;
  transform-origin: left center;
  transform: rotate(var(--project-crack-rotation)) scaleX(0);
  animation: var(--project-crack-branch-animation, none);
}

.project-crack--left {
  top: 44%;
  left: -6%;
  width: 94%;
  --project-crack-rotation: -6deg;
  --project-crack-animation: project-crack-horizontal 1.1s ease-out forwards;
  animation-delay: 10ms;
}

.project-crack--left::before {
  top: -230%;
  left: 46%;
  width: 34%;
  --project-crack-rotation: -26deg;
  --project-crack-branch-animation: project-crack-horizontal 0.94s ease-out forwards;
  animation-delay: 140ms;
}

.project-crack--left::after {
  top: 180%;
  left: 62%;
  width: 28%;
  --project-crack-rotation: 30deg;
  --project-crack-branch-animation: project-crack-horizontal 0.88s ease-out forwards;
  animation-delay: 190ms;
}

.project-crack--top {
  top: -12%;
  left: 58%;
  width: var(--project-crack-thickness, 2.6px);
  height: 66%;
  background: linear-gradient(
    to bottom,
    rgba(255, 255, 255, 0.12),
    rgba(255, 255, 255, 0.98),
    rgba(255, 255, 255, 0.32)
  );
  --project-crack-rotation: 7deg;
  transform-origin: center top;
  transform: rotate(var(--project-crack-rotation)) scaleY(0);
  --project-crack-animation: project-crack-vertical 1.15s ease-out forwards;
  animation-delay: 70ms;
}

.project-crack--top::before {
  top: 32%;
  left: -1280%;
  width: 1400%;
  --project-crack-rotation: -20deg;
  transform-origin: right center;
  --project-crack-branch-animation: project-crack-horizontal 0.92s ease-out forwards;
  animation-delay: 180ms;
}

.project-crack--top::after {
  top: 56%;
  left: 220%;
  width: 1200%;
  --project-crack-rotation: 24deg;
  --project-crack-branch-animation: project-crack-horizontal 0.88s ease-out forwards;
  animation-delay: 230ms;
}

.project-crack--bottom {
  bottom: -14%;
  left: 28%;
  width: var(--project-crack-thickness, 2.6px);
  height: 58%;
  background: linear-gradient(
    to bottom,
    rgba(255, 255, 255, 0.12),
    rgba(255, 255, 255, 0.98),
    rgba(255, 255, 255, 0.32)
  );
  --project-crack-rotation: -9deg;
  transform-origin: center bottom;
  transform: rotate(var(--project-crack-rotation)) scaleY(0);
  --project-crack-animation: project-crack-vertical 1.08s ease-out forwards;
  animation-delay: 140ms;
}

.project-crack--bottom::before {
  bottom: 32%;
  left: 180%;
  width: 1300%;
  --project-crack-rotation: 20deg;
  --project-crack-branch-animation: project-crack-horizontal 0.86s ease-out forwards;
  animation-delay: 240ms;
}

.project-crack--bottom::after {
  bottom: 18%;
  left: -1120%;
  width: 1100%;
  --project-crack-rotation: -28deg;
  transform-origin: right center;
  --project-crack-branch-animation: project-crack-horizontal 0.8s ease-out forwards;
  animation-delay: 280ms;
}

.project-crack--diagonal {
  top: 18%;
  left: 10%;
  width: 70%;
  --project-crack-rotation: 18deg;
  --project-crack-animation: project-crack-horizontal 1s ease-out forwards;
  animation-delay: 110ms;
}

.project-crack--diagonal::before {
  left: 58%;
  top: -40%;
  width: var(--project-crack-thickness, 2.2px);
  height: 140%;
  --project-crack-rotation: -28deg;
  transform-origin: center top;
  transform: rotate(var(--project-crack-rotation)) scaleY(0);
  --project-crack-branch-animation: project-crack-vertical 0.85s ease-out forwards;
  animation-delay: 220ms;
}

.project-crack--diagonal::after {
  left: 74%;
  top: 60%;
  width: 28%;
  --project-crack-rotation: 32deg;
  --project-crack-branch-animation: project-crack-horizontal 0.82s ease-out forwards;
  animation-delay: 250ms;
}

.project-crack--splinter {
  top: 60%;
  left: 22%;
  width: 48%;
  --project-crack-rotation: -16deg;
  --project-crack-animation: project-crack-horizontal 0.94s ease-out forwards;
  animation-delay: 210ms;
}

.project-crack--splinter::before {
  left: 54%;
  top: -70%;
  width: 26%;
  --project-crack-rotation: -30deg;
  transform-origin: left center;
  --project-crack-branch-animation: project-crack-horizontal 0.78s ease-out forwards;
  animation-delay: 300ms;
}

.project-crack--splinter::after {
  left: 66%;
  top: 58%;
  width: var(--project-crack-thickness, 2.1px);
  height: 110%;
  --project-crack-rotation: 22deg;
  transform-origin: center top;
  transform: rotate(var(--project-crack-rotation)) scaleY(0);
  --project-crack-branch-animation: project-crack-vertical 0.78s ease-out forwards;
  animation-delay: 320ms;
}

@keyframes project-crack-horizontal {
  0% {
    opacity: 0;
    transform: rotate(var(--project-crack-rotation, 0deg)) scaleX(0);
  }
  18% {
    opacity: 1;
    transform: rotate(var(--project-crack-rotation, 0deg)) scaleX(0.65);
  }
  52% {
    opacity: 1;
    transform: rotate(var(--project-crack-rotation, 0deg)) scaleX(1);
  }
  82% {
    opacity: 1;
    transform: rotate(var(--project-crack-rotation, 0deg)) scaleX(1.08);
  }
  100% {
    opacity: 0;
    transform: rotate(var(--project-crack-rotation, 0deg)) scaleX(1.16);
  }
}

@keyframes project-crack-vertical {
  0% {
    opacity: 0;
    transform: rotate(var(--project-crack-rotation, 0deg)) scaleY(0);
  }
  22% {
    opacity: 1;
    transform: rotate(var(--project-crack-rotation, 0deg)) scaleY(0.7);
  }
  54% {
    opacity: 1;
    transform: rotate(var(--project-crack-rotation, 0deg)) scaleY(1);
  }
  82% {
    opacity: 1;
    transform: rotate(var(--project-crack-rotation, 0deg)) scaleY(1.08);
  }
  100% {
    opacity: 0;
    transform: rotate(var(--project-crack-rotation, 0deg)) scaleY(1.16);
  }
}

@media (prefers-reduced-motion: reduce) {
  .project-crack,
  .project-crack::before,
  .project-crack::after {
    animation: none !important;
    opacity: 0 !important;
  }
}
